:root{
  --bg:#0b0f14; --card:#111826; --text:#eaf2ff; --muted:#9fb0c7; --line:rgba(255,255,255,.14);
  --btn:#1f6feb; --btn2:#0f1724;
}
*{box-sizing:border-box}
html,body{margin:0;padding:0;background:var(--bg);color:var(--text);font-family:-apple-system,system-ui,Segoe UI,Roboto,Helvetica,Arial}

.wrap{max-width:980px;margin:0 auto;padding:12px}
.card{background:var(--card);border:1px solid var(--line);border-radius:16px;overflow:hidden}
#board{display:block;width:100%;height:auto;touch-action:manipulation}

.topbar{
  position:sticky;top:0;z-index:30;
  display:flex;justify-content:space-between;gap:10px;align-items:center;
  padding:14px 14px calc(12px + env(safe-area-inset-top));
  background:rgba(11,15,20,.92);border-bottom:1px solid var(--line);backdrop-filter: blur(10px);
}
.title{font-weight:900;font-size:16px}
.subtitle{color:var(--muted);font-size:12px;margin-top:2px}
.actions{display:flex;gap:10px;flex-wrap:wrap}
.btn{
  appearance:none;border:1px solid var(--line);background:var(--btn2);color:var(--text);
  border-radius:12px;padding:10px 12px;font-weight:850;font-size:14px;
}
.btn--primary{background:var(--btn)}
.btn--ghost{background:transparent}

.controller{
  position:sticky;bottom:0;z-index:25;
  padding:10px 12px calc(12px + env(safe-area-inset-bottom));
  background:rgba(11,15,20,.94);
  border-top:1px solid var(--line);
  backdrop-filter: blur(10px);
}
.sel{display:flex;justify-content:space-between;align-items:center;gap:10px;margin-bottom:10px}
#selLabel{font-weight:850}
#selValue{color:var(--muted);font-family:ui-monospace,Menlo,Consolas,monospace}

.keys{display:grid;grid-template-columns:repeat(6,1fr);gap:8px}
.key{
  border:1px solid var(--line);background:rgba(255,255,255,.04);color:var(--text);
  border-radius:12px;padding:12px 0;font-size:16px;font-weight:950;
  touch-action:manipulation;
}
.key--primary{background:var(--btn)}
.key--ghost{background:transparent}
.tip{margin-top:8px;color:var(--muted);font-size:12px;text-align:center}

/* Calibration panel */
.cal{margin-top:12px;background:var(--card);border:1px solid var(--line);border-radius:16px;padding:12px}
.hidden{display:none}
.cal__header{display:flex;justify-content:space-between;gap:10px;align-items:flex-start}
.cal__title{font-weight:950}
.cal__hint{color:var(--muted);font-size:12px;margin-top:4px}
.cal__steps{margin:10px 0 0 18px;color:var(--text);font-size:13px}
.cal__buttons{display:flex;flex-wrap:wrap;gap:10px;margin-top:10px}
.cal__out{
  width:100%;height:160px;margin-top:10px;border-radius:12px;border:1px solid var(--line);
  background:#0a0f18;color:var(--text);padding:10px;font-family:ui-monospace,Menlo,Consolas,monospace;font-size:12px
}